# 数组

[toc]

## 一、特点

数组是**线性表**数据结构、它用**连续内存空间**存储一组具有**相同数据类型**的数据。

## 二、线性表和非线性表

### 1.1 线性表

- 数组
- 链表
- 队列
- 栈

### 1.2 非线性表

- 二叉树
- 堆
- 图

## 三、连续内存空间和相同数据类型的优势和劣势

### 3.1 优势：根据下标随机访问，时间复杂度为：O(1)

如何根据下标随机访问？

比如，`int[] a = new int[10]`，计算机为其分配的内存首地址为1000（base_address）， 那么根据下标，某个元素的存储地址为：

```shell
a[i]_address = base_address + i * data_type_size
```

### 3.2 劣势： 为了保证内存数据的连续性，导致插入、删除两个操作比较低效

#### （1）优化低效插入

比如向第k位插入元素，将第位挪到最后，把新元素放入第k位。

快速排序就有用到这个思路。

#### （2）优化低效删除

每次的删除并不真正地进行搬移数据，只是记录数据已经被删除。当数组没有更多空间存储数据时，再执行一次真正的删除操作。这样就能大大减少搬移到次数。

这是JVM标记清除垃圾回收算法的核心思想。

## 四、ArrayList和数组进行对比

ArrayList：

- 可以把数组的操作细节封装起来；

- 支持动态扩容；

  自动扩容为1.5倍。

- 在创建ArrayList的时候事先指定数据大小，可以省掉很多次内存申请和数据搬移操作

何时使用数组：

- ArrayList不能存储基本数据类型，自动装箱和拆箱有性能消耗；
- 如果数据大小事先知道，并且对数据的操作非常简单，也可以直接使用数组；
- 多维数组，用数组会更直观；

总结：业务开发首选容器，很小的性能消耗不影响系统整体性能；底层开发，为了把性能做到极致，数组优于容器。





