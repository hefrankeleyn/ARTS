# 时间复杂度和空间复杂度

[toc]

##  一、大O表示法

所有代码的执行时间T(n)与每行代码的执行次数f(n)成正比。

```
T(n) = O(f(n))
```

公式中的O，表示代码的执行时间T(n)与f(n)表达式成正比。

**大O表示法，并不具体表示代码真正的执行时间，而是表示代码执行时间随数据规模增长的变化趋势。因此，也叫渐进时间复杂度。简称时间复杂度。**

当n很大的时候，公式中的低阶、常量、系数三部分并不左右增长趋势，所以都可以忽略。只记录一个最大量级就可以了。

## 二、时间复杂度

### 2.1 分析一段代码的时间复杂度

- 只关注循环执行次数最多的一段代码；
- 加法法则：总复杂度等于量级最大的那段代码的复杂度；
- 乘法法则：嵌套代码的复杂度等于内外代码复杂度的乘积；

### 2.2 常见的时间复杂度

（1）当数据规模越来越大，执行时间会急剧增加

- 指数阶：O(2^n)
- 阶乘阶：O(n!)

（2）最常见的几种

- 常量阶：O(1)

  > O(1) 只是常量级时间复杂度的一种表示方法，并不是指只执行了一行代码。
  >
  > 只要代码的执行时间不随 n 的增大而增长，这样代码的时间复杂度我们都记作 O(1)。

- 对数阶：O(logn)

  > 对数之间是可以互相转换的，`log3^n` 就等于 `log3^2 * log2n`，所以 `O(log3n) = O(C * log2n)`，其中 `C=log3^2`是一个常量。基于我们前面的一个理论：在采用大 O 标记复杂度的时候，可以忽略系数，即 O(Cf(n)) = O(f(n))。所以，O(log2n) 就等于 O(log3n)。因此，在对数阶时间复杂度的表示方法里，我们忽略对数的“底”，统一表示为 O(logn)。

- 线性阶：O(n)

- 线性对数阶：O(nlogn)

  > 如果一段代码的时间复杂度是 O(logn)，我们循环执行 n 遍，时间复杂度就是 O(nlogn) 了。

- 平方阶`O(n^2)`、立方阶`O(n^3)`......、k次阶`O(n^k)`

![几种时间复杂度趋势](./photos/2023-04-29-几种时间复杂度趋势.webp)

### 2.2 【最好、最坏、平均】情况时间复杂度

- 最好情况时间复杂度：在最理想情况下，执行这段代码的时间复杂度；
- 最坏情况时间复杂度：在最糟糕情况下，执行这段代码的时间复杂度；
- 平均情况时间复杂度：又称为加权时间复杂度，或者期望时间复杂度；

> 大部份情况下，并不需要区分最好、最坏、平均三种复杂度。

### 2.3 均摊时间复杂度，以及摊还分析（平摊分析）

> 平均复杂度只在特殊情况下才会用到，而均摊时间复杂度应用的场景比它更佳特殊、有限。

使用摊还分析的条件：

1. 大部份情况下都是最好时间复杂度（比如：`O(1)`），只有个别情况下复杂度才比较高（比如：`O(n)`）；
2. 最好时间复杂度和最坏时间复杂度，出现的频率非常有规律，并且循环往复；

一般均摊时间复杂度就等于最好情况的时间复杂度。

## 三、空间复杂度

空间复杂度的全称为，渐进空间复杂度。表示算法的存储空间与数据规模之间的增长关系。

常见的空间复杂度有：`O(1)`、`O(n)`、`O(n^2)`。

